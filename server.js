!function(e){function n(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var r={};n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=6)}([function(e,n,r){"use strict";r.d(n,"a",function(){return o}),r.d(n,"b",function(){return a}),r.d(n,"f",function(){return i}),r.d(n,"g",function(){return u}),r.d(n,"c",function(){return c}),r.d(n,"d",function(){return l}),r.d(n,"e",function(){return p});var t=r(20),s=r.n(t),o=process.env.NODE_ENV||"development",a="development"===o,i="localhost",u=process.env.PORT||4e3,c=a?"http://".concat(i,":").concat(u,"/"):"/",l=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return s.a.resolve.apply(s.a,[process.cwd()].concat(n))},p=require},function(e,n){e.exports=require("webpack")},function(e,n){e.exports=require("debug")},function(e,n){e.exports=require("webpack-merge")},function(e,n){e.exports=require("ssr-webpack-plugin")},function(e,n,r){"use strict";(function(e){var t=r(1),s=r.n(t),o=r(27),a=r.n(o),i=r(28),u=r.n(i),c=r(29),l=r.n(c),p=r(0),d=p.b,f=!d,m=function(e){return a.a.extract({fallback:{loader:"react-style-loader",options:{react:e}},use:[{loader:"css-loader",options:{minimize:f,souceMap:d}},{loader:"postcss-loader",options:{minimize:f,souceMap:d}},{loader:"sass-loader",options:{minimize:f,souceMap:d}}]})};n.a={devtool:p.b&&"cheap-module-source-map",resolve:{alias:{lodash:"lodash-es"},extensions:[".js",".scss"],modules:[Object(p.d)("src"),"node_modules"]},module:{rules:[{test:/\.js$/,loader:"babel-loader",exclude:/node_modules/,options:{cacheDirectory:!0}},{test:/\.pug$/,use:["apply-loader",{loader:"pug-loader",options:{pretty:p.b}}]},{test:/\.scss$/,oneOf:[{test:/app.scss/,use:m()},{test:/./,use:m(!0)}]}]},plugins:[new s.a.LoaderOptionsPlugin({context:e}),new a.a({disable:!0,filename:"[name].[contenthash].css"}),new u.a,new s.a.DefinePlugin({"process.env.NODE_ENV":JSON.stringify(p.a),__DEV__:p.b})].concat(function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}(p.b?[new s.a.NamedModulesPlugin,new s.a.NamedChunksPlugin]:[new l.a,new s.a.NoEmitOnErrorsPlugin,new s.a.optimize.ModuleConcatenationPlugin]))}}).call(n,"/")},function(e,n,r){r(7),e.exports=r(8)},function(e,n){e.exports=require("regenerator-runtime/runtime")},function(e,n,r){"use strict";function t(){return t=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},t.apply(this,arguments)}function s(e){return function(){var n=this,r=arguments;return new Promise(function(t,s){function o(e,n){try{var r=u[e](n),o=r.value}catch(e){return void s(e)}r.done?t(o):Promise.resolve(o).then(a,i)}function a(e){o("next",e)}function i(e){o("throw",e)}var u=e.apply(n,r);a()})}}Object.defineProperty(n,"__esModule",{value:!0});var o,a,i=r(9),u=r.n(i),c=r(2),l=r.n(c),p=r(10),d=r.n(p),f=r(11),m=r.n(f),b=r(12),h=r.n(b),g=r(13),v=r.n(g),w=r(14),x=r.n(w),j=r(15),y=r.n(j),k=r(16),O=r.n(k),P=r(17),q=r.n(P),_=r(18),E=r.n(_),S=r(19),M=(r.n(S),r(0)),R=l()("1stg:server"),N=M.b?r(21).renderFile(Object(M.d)("server/template.pug"),{pretty:!0}):u.a.readFileSync(Object(M.d)("dist/template.html"),"utf-8"),A=new d.a,C=E()(1e3),F=[y()(),O()("/public",q()(Object(M.d)("public"),{maxAge:31536e6})),function(){var e=s(regeneratorRuntime.mark(function e(n,r){var t,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.b){e.next=5;break}return e.next=3,o;case 3:e.next=9;break;case 5:return e.next=7,n.cashed();case 7:if(!e.sent){e.next=9;break}return e.abrupt("return");case 9:if(!("GET"!==n.method||n.url.lastIndexOf(".")>n.url.lastIndexOf("/"))&&["*/*","text/html"].find(function(e){return n.get("Accept").includes(e)})){e.next=11;break}return e.abrupt("return",r());case 11:t={ctx:n,title:"React Hackernews"},n.respond=!1,s=n.res,a.renderToStream(t).on("afterRender",function(){n.status=t.code||200,n.set({"Content-Type":"text/html"})}).on("error",function(e){var r=e.status,t=e.url;if(t)return n.status=302,n.set({Location:t}),s.end();switch(n.status=r||500,r){case 404:return s.end("404 | Page Not Found");default:s.end("500 | Internal Server Error"),R("error during render : ".concat(t)),R(e.stack)}}).pipe(s);case 15:case"end":return e.stop()}},e,this)}));return function(n,r){return e.apply(this,arguments)}}()],D=function(e,n){return Object(S.createBundleRenderer)(e,t({},n,{template:N,basedir:Object(M.d)("dist/static"),runInNewContext:!1}))};if(M.b){var T=r(22).default(function(e){var n=e.bundle,r=e.clientManifest;a=D(n,{clientManifest:r})}),V=T.readyPromise,I=T.webpackMiddleware;o=V,F.push(I)}else{a=D(Object(M.e)(Object(M.d)("dist/ssr-server-bundle.json")),{clientManifest:Object(M.e)(Object(M.d)("dist/ssr-client-manifest.json"))});var $={};F.splice(1,0,v()(),q()(Object(M.d)("dist/static"),{maxAge:31536e6},$),x()(m()({get:function(e){return C.get(e)},set:function(e,n){return C.set(e,n)}}))),$["/service-worker.js"].maxAge=0}A.use(h()(F)),A.listen(M.g,M.f,function(){R("Server start listening at %s:%s",M.f,M.g)})},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("koa")},function(e,n){e.exports=require("koa-cash")},function(e,n){e.exports=require("koa-compose")},function(e,n){e.exports=require("koa-compress")},function(e,n){e.exports=require("koa-convert")},function(e,n){e.exports=require("koa-logger")},function(e,n){e.exports=require("koa-mount")},function(e,n){e.exports=require("koa-static-cache")},function(e,n){e.exports=require("lru-cache")},function(e,n){e.exports=require("react-server-renderer")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("pug")},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r(2),s=r.n(t),o=r(23),a=r.n(o),i=r(24),u=r.n(i),c=r(1),l=r.n(c),p=r(0),d=r(25),f=r(30),m=s()("1stg:server:dev");d.a.entry.app.unshift("webpack-hot-middleware/client","react-hot-loader/patch"),d.a.plugins.unshift(new l.a.HotModuleReplacementPlugin),n.default=function(e){var n,r,t,s,o=new Promise(function(e){n=e}),i=function(){n(),e.apply(void 0,arguments)},c=l()(d.a),b=a()({compiler:c,dev:{stats:{colors:!0}}});c.plugin("done",function(e){e=e.toJson(),e.errors.forEach(m),e.warnings.forEach(m),e.errors.length||(s=b.dev.fileSystem,r=JSON.parse(s.readFileSync(Object(p.d)("dist/ssr-client-manifest.json"))),t&&i({bundle:t,clientManifest:r,fs:s}))});var h=new u.a,g=l()(f.a);return g.outputFileSystem=h,g.watch({},function(e,n){if(e)throw e;n=n.toJson(),n.errors.length||(t=JSON.parse(h.readFileSync(Object(p.d)("dist/ssr-server-bundle.json"))),r&&i({bundle:t,clientManifest:r,fs:s}))}),{readyPromise:o,webpackMiddleware:b}}},function(e,n){e.exports=require("koa-webpack")},function(e,n){e.exports=require("memory-fs")},function(e,n,r){"use strict";var t=r(1),s=r.n(t),o=r(3),a=r.n(o),i=r(4),u=(r.n(i),r(26)),c=r.n(u),l=r(0),p=r(5),d=a.a.smart(p.a,{entry:{app:[Object(l.d)("src/entry-client.js")],vendors:["react","react-dom","react-redux","react-router","react-router-redux","react-router-config","react-router-dom"]},resolve:{alias:{"create-api":"./create-api-client.js"}},output:{publicPath:l.c,path:Object(l.d)("dist/static"),filename:"[name].[".concat(l.b?"hash":"chunkhash","].js")},plugins:[new s.a.DefinePlugin({"process.env.REACT_ENV":'"client"',__SERVER__:!1}),new s.a.optimize.CommonsChunkPlugin({names:["vendors","manifest"]}),new i.SSRClientPlugin({filename:"../ssr-client-manifest.json"})]});l.b||d.plugins.push(new c.a({cacheId:"react-hn",filename:"service-worker.js",minify:!0,dontCacheBustUrlsMatching:/./,staticFileGlobsIgnorePatterns:[/\.map$/,/\.json$/],runtimeCaching:[{urlPattern:"/",handler:"networkFirst"},{urlPattern:/\/(top|new|show|ask|jobs)/,handler:"networkFirst"},{urlPattern:"/item/:id",handler:"networkFirst"},{urlPattern:"/user/:id",handler:"networkFirst"}]})),n.a=d},function(e,n){e.exports=require("sw-precache-webpack-plugin")},function(e,n){e.exports=require("extract-text-webpack-plugin")},function(e,n){e.exports=require("friendly-errors-webpack-plugin")},function(e,n){e.exports=require("uglifyjs-webpack-plugin")},function(e,n,r){"use strict";var t=r(1),s=r.n(t),o=r(3),a=r.n(o),i=r(31),u=r.n(i),c=r(4),l=(r.n(c),r(0)),p=r(5);n.a=a()(p.a,{entry:Object(l.d)("src/entry-server.js"),resolve:{alias:{"create-api":"./create-api-server.js"}},target:"node",output:{path:Object(l.d)("dist"),filename:"[name].[chunkhash].js",libraryTarget:"commonjs2"},externals:u()({whitelist:/\.s?css$/}),plugins:[new s.a.DefinePlugin({"process.env.REACT_ENV":'"server"',__SERVER__:!0}),new c.SSRServerPlugin]})},function(e,n){e.exports=require("webpack-node-externals")}]);