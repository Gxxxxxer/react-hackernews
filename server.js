!function(e){function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}var t={};r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=6)}([function(e,r,t){"use strict";t.d(r,"a",function(){return o}),t.d(r,"b",function(){return a}),t.d(r,"f",function(){return i}),t.d(r,"g",function(){return c}),t.d(r,"c",function(){return u}),t.d(r,"d",function(){return l}),t.d(r,"e",function(){return p});var n=t(18),s=t.n(n),o=process.env.NODE_ENV||"development",a="development"===o,i="localhost",c=process.env.PORT||4e3,u=a?"http://".concat(i,":").concat(c,"/"):"/",l=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return s.a.resolve.apply(s.a,[process.cwd()].concat(r))},p=require},function(e,r){e.exports=require("webpack")},function(e,r){e.exports=require("debug")},function(e,r){e.exports=require("webpack-merge")},function(e,r){e.exports=require("ssr-webpack-plugin")},function(e,r,t){"use strict";(function(e){function n(){return(n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}t.d(r,"a",function(){return g});var s=t(1),o=t.n(s),a=t(25),i=t.n(a),c=t(26),u=t.n(c),l=t(27),p=t.n(l),d=t(0),f=d.b,b=!f,m=function(e){return i.a.extract({fallback:{loader:"react-style-loader",options:{react:e}},use:[{loader:"css-loader",options:{minimize:b,souceMap:f}},{loader:"postcss-loader",options:{minimize:b,souceMap:f}},{loader:"sass-loader",options:{minimize:b,souceMap:f}}]})},g=function(e){return{test:/\.js$/,loader:"babel-loader",exclude:/node_modules/,options:n({cacheDirectory:!0},e&&{presets:[["@babel/env",{modules:!1,exclude:["babel-plugin-transform-async-to-generator","babel-plugin-transform-regenerator"]}]]})}};r.b={devtool:d.b&&"cheap-module-source-map",resolve:{alias:{lodash:"lodash-es"},extensions:[".js",".scss"],modules:[Object(d.d)("src"),"node_modules"]},module:{rules:[{test:/\.pug$/,use:["apply-loader",{loader:"pug-loader",options:{pretty:d.b}}]},{test:/\.scss$/,oneOf:[{test:/app.scss/,use:m()},{test:/./,use:m(!0)}]}]},plugins:[new o.a.LoaderOptionsPlugin({context:e}),new i.a({disable:!0,filename:"[name].[contenthash].css"}),new u.a,new o.a.DefinePlugin({"process.env.NODE_ENV":JSON.stringify(d.a),__DEV__:d.b})].concat(function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(d.b?[new o.a.NamedModulesPlugin,new o.a.NamedChunksPlugin]:[new p.a,new o.a.NoEmitOnErrorsPlugin,new o.a.optimize.ModuleConcatenationPlugin]))}}).call(r,"/")},function(e,r,t){"use strict";function n(){return(n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}Object.defineProperty(r,"__esModule",{value:!0});var s,o,a=t(7),i=t.n(a),c=t(2),u=t.n(c),l=t(8),p=t.n(l),d=t(9),f=t.n(d),b=t(10),m=t.n(b),g=t(11),h=t.n(g),v=t(12),w=t.n(v),x=t(13),j=t.n(x),y=t(14),O=t.n(y),k=t(15),P=t.n(k),q=t(16),_=t.n(q),E=t(17),S=(t.n(E),t(0)),M=u()("1stg:server"),N=S.b?t(19).renderFile(Object(S.d)("server/template.pug"),{pretty:!0}):i.a.readFileSync(Object(S.d)("dist/template.html"),"utf-8"),R=new p.a,A=_()(1e3),C=[j()(),O()("/public",P()(Object(S.d)("public"),{maxAge:31536e6})),async function(e,r){if(S.b)await s;else if(await e.cashed())return;if("GET"!==e.method||e.url.lastIndexOf(".")>e.url.lastIndexOf("/")||!["*/*","text/html"].find(function(r){return e.get("Accept").includes(r)}))return r();var t={ctx:e,title:"React Hackernews"};e.respond=!1;var n=e.res;o.renderToStream(t).on("afterRender",function(){e.status=t.code||200,e.set({"Content-Type":"text/html"})}).on("error",function(r){var t=r.status,s=r.url;if(s)return e.status=302,e.set({Location:s}),n.end();switch(e.status=t||500,t){case 404:return n.end("404 | Page Not Found");default:n.end("500 | Internal Server Error"),M("error during render : ".concat(s)),M(r.stack)}}).pipe(n)}],F=function(e,r){return Object(E.createBundleRenderer)(e,n({},r,{template:N,basedir:Object(S.d)("dist/static"),runInNewContext:!1}))};if(S.b){var D=t(20).default(function(e){var r=e.bundle,t=e.clientManifest;o=F(r,{clientManifest:t})}),T=D.readyPromise,V=D.webpackMiddleware;s=T,C.push(V)}else{o=F(Object(S.e)(Object(S.d)("dist/ssr-server-bundle.json")),{clientManifest:Object(S.e)(Object(S.d)("dist/ssr-client-manifest.json"))});var I={};C.splice(1,0,h()(),P()(Object(S.d)("dist/static"),{maxAge:31536e6},I),w()(f()({get:function(e){return A.get(e)},set:function(e,r){return A.set(e,r)}}))),I["/service-worker.js"].maxAge=0}R.use(m()(C)),R.listen(S.g,S.f,function(){M("Server start listening at %s:%s",S.f,S.g)})},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("koa")},function(e,r){e.exports=require("koa-cash")},function(e,r){e.exports=require("koa-compose")},function(e,r){e.exports=require("koa-compress")},function(e,r){e.exports=require("koa-convert")},function(e,r){e.exports=require("koa-logger")},function(e,r){e.exports=require("koa-mount")},function(e,r){e.exports=require("koa-static-cache")},function(e,r){e.exports=require("lru-cache")},function(e,r){e.exports=require("react-server-renderer")},function(e,r){e.exports=require("path")},function(e,r){e.exports=require("pug")},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(2),s=t.n(n),o=t(21),a=t.n(o),i=t(22),c=t.n(i),u=t(1),l=t.n(u),p=t(0),d=t(23),f=t(28),b=s()("1stg:server:dev");d.a.entry.app.unshift("webpack-hot-middleware/client","react-hot-loader/patch"),d.a.plugins.unshift(new l.a.HotModuleReplacementPlugin),r.default=function(e){var r,t,n,s,o=new Promise(function(e){r=e}),i=function(){r(),e.apply(void 0,arguments)},u=l()(d.a),m=a()({compiler:u,dev:{stats:{colors:!0}}});u.plugin("done",function(e){(e=e.toJson()).errors.forEach(b),e.warnings.forEach(b),e.errors.length||(s=m.dev.fileSystem,t=JSON.parse(s.readFileSync(Object(p.d)("dist/ssr-client-manifest.json"))),n&&i({bundle:n,clientManifest:t,fs:s}))});var g=new c.a,h=l()(f.a);return h.outputFileSystem=g,h.watch({},function(e,r){if(e)throw e;(r=r.toJson()).errors.length||(n=JSON.parse(g.readFileSync(Object(p.d)("dist/ssr-server-bundle.json"))),t&&i({bundle:n,clientManifest:t,fs:s}))}),{readyPromise:o,webpackMiddleware:m}}},function(e,r){e.exports=require("koa-webpack")},function(e,r){e.exports=require("memory-fs")},function(e,r,t){"use strict";var n=t(1),s=t.n(n),o=t(3),a=t.n(o),i=t(4),c=(t.n(i),t(24)),u=t.n(c),l=t(0),p=t(5),d=a.a.smart(p.b,{entry:{app:[Object(l.d)("src/entry-client.js")],vendors:["firebase","history","lru-cache","react","react-dom","react-redux","react-router","react-router-redux","react-router-config","react-router-dom","redux","redux-thunk"]},resolve:{alias:{"create-api":"./create-api-client.js"}},output:{publicPath:l.c,path:Object(l.d)("dist/static"),filename:"[name].[".concat(l.b?"hash":"chunkhash","].js")},module:{rules:[Object(p.a)()]},plugins:[new s.a.DefinePlugin({"process.env.REACT_ENV":'"client"',__SERVER__:!1}),new s.a.optimize.CommonsChunkPlugin({names:["vendors","manifest"]}),new i.SSRClientPlugin({filename:"../ssr-client-manifest.json"})]});l.b||d.plugins.push(new u.a({cacheId:"react-hn",filename:"service-worker.js",minify:!0,dontCacheBustUrlsMatching:/./,staticFileGlobsIgnorePatterns:[/\.map$/,/\.json$/],runtimeCaching:[{urlPattern:"/",handler:"networkFirst"},{urlPattern:/\/(top|new|show|ask|jobs)/,handler:"networkFirst"},{urlPattern:"/item/:id",handler:"networkFirst"},{urlPattern:"/user/:id",handler:"networkFirst"}]})),r.a=d},function(e,r){e.exports=require("sw-precache-webpack-plugin")},function(e,r){e.exports=require("extract-text-webpack-plugin")},function(e,r){e.exports=require("friendly-errors-webpack-plugin")},function(e,r){e.exports=require("uglifyjs-webpack-plugin")},function(e,r,t){"use strict";var n=t(1),s=t.n(n),o=t(3),a=t.n(o),i=t(29),c=t.n(i),u=t(4),l=(t.n(u),t(0)),p=t(5);r.a=a.a.smart(p.b,{entry:Object(l.d)("src/entry-server.js"),resolve:{alias:{"create-api":"./create-api-server.js"}},target:"node",output:{path:Object(l.d)("dist"),filename:"[name].[chunkhash].js",libraryTarget:"commonjs2"},externals:c()({whitelist:/\.s?css$/}),module:{rules:[Object(p.a)(!0)]},plugins:[new s.a.DefinePlugin({"process.env.REACT_ENV":'"server"',__SERVER__:!0}),new u.SSRServerPlugin]})},function(e,r){e.exports=require("webpack-node-externals")}]);