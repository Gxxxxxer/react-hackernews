webpackJsonp([4],{104:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return 1===e?e+t:e+t+"s"}var a=n(38),c=n.n(a),u=n(2),l=n.n(u),s=n(27),f=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return"boolean"!=typeof t&&(n=t,t=!0),function(i){var a,u,f=(u=a=function(t){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.a.PureComponent),function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(a,[{key:"setTitle",value:function(){var e="function"==typeof n?n.call(this,this):n;e&&Promise.resolve(e).then(function(e){e&&(document.title="React Hackernews | ".concat(e))})}},{key:"componentWillMount",value:function(){e.__inject__&&e.__inject__(this.props.staticContext),this.setTitle()}},{key:"render",value:function(){return l.a.createElement(i,this.props)}}]),a}(),Object.defineProperty(a,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:"Ssr".concat(i.displayName||i.name||"Component")}),u);return c()(t?Object(s.d)(f):f,i)}};t.a=function(e){var t=e.replace(/^https?:\/\//,"").replace(/\/.*$/,"").split(".").slice(-3);return"www"===t[0]&&t.shift(),t.join(".")},t.c=function(e){var t=Date.now()/1e3-Number(e);return t<3600?i(~~(t/60)," minute"):t<86400?i(~~(t/3600)," hour"):i(~~(t/86400)," day")},n.d(t,"b",function(){return p}),n.d(t,"d",function(){return f});var p={}},108:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=n(66),c=n(60),u=n(57),l=n(138),s=n.n(l),f="SET_ACTIVE_TYPE",p="SET_LIST",d="SET_ITEMS",h="SET_USER",m={activeType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.activeType;default:return e}},itemsPerPage:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:20},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return o({},e,t.items.reduce(function(e,t){return t&&(e[t.id]=t),e},{}));default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return o({},e,r({},t.id,t.user||!1));default:return e}},lists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{top:[],new:[],show:[],ask:[],job:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return o({},e,r({},t.listType,t.ids));default:return e}}},b=n(110),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.activeType,r=e.itemsPerPage,o=e.lists;if(!n)return[];var i=(t-1)*r,a=t*r;return o[n].slice(i,a)},v=function(e,t){return y(e,t).map(function(t){return e.items[t]}).filter(function(e){return e})},g=function(e){return{type:f,activeType:e}},w=function(e,t){return{type:p,listType:e,ids:t}},_=function(e){return{type:d,items:e}},O=function(e,t){return{type:h,id:e,user:t}},j=function(e,t){return function(n){return n(g(e)),Object(b.a)(e).then(function(t){return n(w(e,t))}).then(function(){return n(x(t))})}},E=function(e){return function(t,n){var r=Date.now(),o=n();return(e=e.filter(function(e){var t=o.items[e];return!t||r-t.__lastUpdated>18e4})).length?Object(b.b)(e).then(function(e){return t(_(e))}):Promise.resolve()}},x=function(e){return function(t,n){return t(E(y(n(),e)))}},T=function(e){return function(t,n){return n().users[e]?Promise.resolve():Object(b.c)(e).then(function(n){return t(O(e,n))})}};n.d(t,"g",function(){return P}),n.d(t,!1,function(){return g}),n.d(t,"h",function(){return w}),n.d(t,!1,function(){return _}),n.d(t,!1,function(){return O}),n.d(t,"e",function(){return j}),n.d(t,"d",function(){return E}),n.d(t,"c",function(){return x}),n.d(t,"f",function(){return T}),n.d(t,!1,function(){return y}),n.d(t,"a",function(){return v});var P=Object(a.a)(),S=u.d;t.b=function(e){return Object(u.e)(Object(u.c)(i({},m,{router:c.c})),e,S(Object(u.a)(Object(c.b)(P),s.a)))}},110:function(e,t,n){"use strict";(function(e){function r(){i((u.cachedIds.top||[]).slice(0,30)),setTimeout(r,9e5)}function o(e){c&&console.log("fetching ".concat(e,"..."));var t=u.cachedItems;return t&&t.has(e)?(c&&console.log("cache hit for ".concat(e,".")),Promise.resolve(t.get(e))):new Promise(function(n,r){u.child(e).once("value",function(r){var o=r.val();o&&(o.__lastUpdated=Date.now()),t&&t.set(e,o),c&&console.log("fetched ".concat(e,".")),n(o)},r)})}function i(e){return Promise.all(e.map(function(e){return function(e){return o("item/".concat(e))}(e)}))}t.a=function(e){return u.cachedIds&&u.cachedIds[e]?Promise.resolve(u.cachedIds[e]):o("".concat(e,"stories"))},t.b=i,t.c=function(e){return o("user/".concat(e))},t.d=function(e,t){var n=!0,r=u.child("".concat(e,"stories")),o=function(e){n?n=!1:t(e.val())};return r.on("value",o),function(){r.off("value",o)}};var a=n(139),c=!!e.env.DEBUG_API,u=Object(a.a)({version:"/v0",config:{databaseURL:"https://hacker-news.firebaseio.com"}});u.onServer&&r()}).call(t,n(42))},113:function(e,t,n){e.exports=n(114)},114:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s=n(2),f=n.n(s),p=n(54),d=n(121),h=n.n(d),m=n(56),b=n(107),y=n(60),v=n(108),g=n(111),w=n(27),_=n(194),O=n(109),j=n(112),E=n(104),x=(n(206),function(e){return Object(p.asyncComponent)({resolve:e})}),T=function(e){return x(function(){return n.e(1).then(n.bind(null,222)).then(function(t){return t.default(e)})})},P=[{path:"/",exact:!0,component:function(){return f.a.createElement(w.a,{to:"/top"})}},{path:"/top/:page(\\d+)?",component:T("top")},{path:"/new/:page(\\d+)?",component:T("new")},{path:"/show/:page(\\d+)?",component:T("show")},{path:"/ask/:page(\\d+)?",component:T("ask")},{path:"/job/:page(\\d+)?",component:T("job")},{path:"/item/:id(\\d+)",component:x(function(){return n.e(0).then(n.bind(null,223))})},{path:"/user/:id",component:x(function(){return n.e(2).then(n.bind(null,224))})},{path:"*",component:function(e){function t(){return o(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,f.a.PureComponent),a(t,[{key:"componentWillMount",value:function(){this.props.staticContext&&(this.props.staticContext.code=404)}},{key:"render",value:function(){return"Custom 404 Page, will you implement it?"}}]),t}()}],S={entering:{opacity:0},entered:{opacity:1}},k=Object(O.c)(l=function(e){function t(){return o(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,f.a.PureComponent),a(t,[{key:"componentDidMount",value:function(){E.b.appMounted=!0}},{key:"render",value:function(){var e=this.props.location;return f.a.createElement(f.a.Fragment,null,f.a.createElement("header",{className:"header"},f.a.createElement("nav",{className:"inner"},f.a.createElement(O.b,{to:"/",exact:!0},f.a.createElement("img",{className:"logo",src:"/public/logo-48.png",alt:"logo"})),["top","new","show","ask","job"].map(function(e){return f.a.createElement(O.b,{key:e,to:"/".concat(e)},Object(g.a)(e))}),f.a.createElement("a",{className:"github",href:"https://github.com/JounQin/react-hackernews",target:"_blank",rel:"noopener noreferrer"},"Built with React.js"))),f.a.createElement(j.TransitionGroup,{component:s.Fragment},f.a.createElement(j.Transition,{timeout:200,key:e.pathname.split("/")[1],mountOnEnter:!0,unmountOnExit:!0},function(t){return f.a.createElement("div",{className:"view",style:S[t]},Object(_.a)(P,null,{location:e}))})))}}]),t}())||l,C=Object(v.b)(window.__INITIAL_STATE__),I=window.ASYNC_COMPONENTS_STATE;delete window.__INITIAL_STATE__,delete window.ASYNC_COMPONENTS_STATE;var N=s.Fragment,A=function(){var e=f.a.createElement(N,null,f.a.createElement(p.AsyncComponentProvider,{rehydrateState:I},f.a.createElement(b.a,{store:C},f.a.createElement(y.a,{history:v.g},f.a.createElement(k,null)))));h()(e).then(function(){return Object(m.hydrate)(e,document.getElementById("app"))})};A(),("https:"===location.protocol||["127.0.0.1","localhost"].includes(location.hostname))&&navigator.serviceWorker&&navigator.serviceWorker.register("/service-worker.js")},139:function(e,t,n){"use strict";t.a=function(e){var t=e.config,n=e.version;return o.a.initializeApp(t),o.a.database().ref(n)};var r=n(140),o=n.n(r),i=n(159);n.n(i)},206:function(e,t,n){var r=n(207);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(106)("6a6d2d6a",r,!0)},207:function(e,t,n){(e.exports=n(105)(void 0)).push([e.i,"body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:15px;background-color:#f2f3f5;margin:0;padding-top:55px;overflow-y:scroll}a,body{color:#34495e}a{text-decoration:none}.header{background-color:#f60;position:fixed;z-index:999;height:55px;top:0;left:0;right:0}.header .inner{max-width:800px;box-sizing:border-box;margin:0 auto;padding:15px 5px}.header a{color:hsla(0,0%,100%,.8);line-height:24px;transition:color .15s ease;display:inline-block;vertical-align:middle;font-weight:300;letter-spacing:.075em;margin-right:1.8em}.header a.active{color:#fff;font-weight:400}.header a:hover{color:#fff}.header a:nth-child(6){margin-right:0}.header .github{color:#fff;font-size:.9em;margin:0;float:right}.logo{width:24px;margin-right:10px;display:inline-block;vertical-align:middle}.view{max-width:800px;margin:0 auto;position:relative;opacity:0;transition:all .2s ease}@media (max-width:860px){.header .inner{padding:15px 30px}}@media (max-width:600px){.header .inner{padding:15px}.header a{margin-right:1em}.header .github{display:none}}",""])}},[113]);